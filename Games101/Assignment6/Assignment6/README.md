I've finished task ...

# 完成部分

1. 提交格式正确，正常编译运行

2. 包围盒求交

   功能：光线与包围盒求交，并返回交点信息

   修改：`Bounds3.cpp` `Bounds3::IntersectP(...)`

3. BVH查找

   功能：递归地查询光线与bvh对应的图元集合的交点

   修改：`BVH.cpp` `BVHAccel::getIntersection()`

4. SAH查找

   功能：优化BVH树，以加速BVH查找速度。

   修改：`BVH.cpp` `BVHAccel::recursiveBuild()`

实验结果：`images/binary.ppm`，BVH与SAH一致

# SAH

## 实现方法

优化构建BVH树时，结点的分割方式

1. 按包围盒长轴方向，根据内部基本图元的质心，均匀地分入k个桶中（实现中：k = 12）

2. 每个桶求包围盒

3. k个桶分成AB两组，有k-1种分法，看哪种分法cost最小

   用表面积估计命中概率，并假设命中每一个基本图元的消耗相同
   $$
   c(A, B) = p(A) a + p(B) b + t_{trav}\\
   = S(A) / S(C) * count_a + S(B) / S(C) * count_b + t_{trav}
   $$

4. 利用cost最小的分法，将图元分成两组

## 查找时间开销对比

测试环境：VS2019 x64 debug

分别测试5次

| 序号\时间消耗(ms) | BVH   | SAH     |
| ----------------- | ----- | ------- |
| 1                 | 12361 | 11871   |
| 2                 | 12512 | 11720   |
| 3                 | 12967 | 11952   |
| 4                 | 12933 | 11545   |
| 5                 | 12812 | 11553   |
| 平均              | 12717 | 11728.2 |

查找速度在加了SAH优化后，五次查询时间平均减少了988.8ms，优化了7.78%。

