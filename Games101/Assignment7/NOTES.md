> Games101-7

# 作业7

## 基础部分

做作业的过程拆分

1. 移动已实现的功能到作业7

2. castRay中，先求交点，输出法线信息验证交点正确

3. 添加直接光照采样光源的部分

   此时光源所在平面是全黑的

4. 添加间接光照采样到非光源的部分

   此时光源所在平面被间接光照照亮（包括光源位置），而pdf的思考中说光源位置是黑色的，私以为写错了

5. 添加发光物体的能量，即光源

1spp 运行时间 300s-350s

加下面的代码后，257s

```c++
#pragma omp parallel for
```

简单的分成4块，然后用四个线程计算，80-95s

对于16spp

- 优化前：84min 5091s
- 分块：24min 1487s
